<!DOCTYPE html>
<html>
<head>
    <title>Farm</title>

    <link rel="stylesheet" type="text/css" href="/static/css/farm_css.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

</head>
<body style="background-color: rgb(3, 13, 100); background-image : url('/static/img_bg_7.jpeg');background-repeat: no-repeat;background-position: center;background-size: cover;">


<script>
    var eventSource = new EventSource("/farm_listen")

    eventSource.addEventListener("message", function (e) {
        console.log(e.data)
    }, false)

    eventSource.addEventListener("online", function (e) {
        // console.log(e.data.color)
        data = JSON.parse(e.data)

        document.querySelector("#sec1").style.backgroundColor = data.sector_plant[0]
        document.querySelector("#sec2").style.backgroundColor = data.sector_plant[1]
        document.querySelector("#sec3").style.backgroundColor = data.sector_plant[2]
        document.querySelector("#sec4").style.backgroundColor = data.sector_plant[3]
        document.querySelector("#sec5").style.backgroundColor = data.sector_plant[4]
        document.querySelector("#sec6").style.backgroundColor = data.sector_plant[5]
        document.querySelector("#sec7").style.backgroundColor = data.sector_plant[6]
        document.querySelector("#sec8").style.backgroundColor = data.sector_plant[7]
        document.querySelector("#sec9").style.backgroundColor = data.sector_plant[8]

        document.querySelector("#sec1").style.boxShadow = data.sec_shadow[0]
        document.querySelector("#sec2").style.boxShadow = data.sec_shadow[1]
        document.querySelector("#sec3").style.boxShadow = data.sec_shadow[2]
        document.querySelector("#sec4").style.boxShadow = data.sec_shadow[3]
        document.querySelector("#sec5").style.boxShadow = data.sec_shadow[4]
        document.querySelector("#sec6").style.boxShadow = data.sec_shadow[5]
        document.querySelector("#sec7").style.boxShadow = data.sec_shadow[6]
        document.querySelector("#sec8").style.boxShadow = data.sec_shadow[7]
        document.querySelector("#sec9").style.boxShadow = data.sec_shadow[8]
    
        document.querySelector("#sec1m").innerText = data.sector_moisture[0]
        document.querySelector("#sec1p").innerText = data.sector_plant_health[0]
        document.querySelector("#sec1mt").innerText = data.sector_motor[0]

        document.querySelector("#sec2m").innerText = data.sector_moisture[1]
        document.querySelector("#sec2p").innerText = data.sector_plant_health[1]
        document.querySelector("#sec2mt").innerText = data.sector_motor[1]

        document.querySelector("#sec3m").innerText = data.sector_moisture[2]
        document.querySelector("#sec3p").innerText = data.sector_plant_health[2]
        document.querySelector("#sec3mt").innerText = data.sector_motor[2]

        document.querySelector("#sec4m").innerText = data.sector_moisture[3]
        document.querySelector("#sec4p").innerText = data.sector_plant_health[3]
        document.querySelector("#sec4mt").innerText = data.sector_motor[3]

        document.querySelector("#sec5m").innerText = data.sector_moisture[4]
        document.querySelector("#sec5p").innerText = data.sector_plant_health[4]
        document.querySelector("#sec5mt").innerText = data.sector_motor[4]

        document.querySelector("#sec6m").innerText = data.sector_moisture[5]
        document.querySelector("#sec6p").innerText = data.sector_plant_health[5]
        document.querySelector("#sec6mt").innerText = data.sector_motor[5]

        document.querySelector("#sec7m").innerText = data.sector_moisture[6]
        document.querySelector("#sec7p").innerText = data.sector_plant_health[6]
        document.querySelector("#sec7mt").innerText = data.sector_motor[6]

        document.querySelector("#sec8m").innerText = data.sector_moisture[7]
        document.querySelector("#sec8p").innerText = data.sector_plant_health[7]
        document.querySelector("#sec8mt").innerText = data.sector_motor[7]

        document.querySelector("#sec9m").innerText = data.sector_moisture[8]
        document.querySelector("#sec9p").innerText = data.sector_plant_health[8]
        document.querySelector("#sec9mt").innerText = data.sector_motor[8]


    }, true)

</script>



<div class="row sticky-top">
    <nav class="navbar  navbar-expand-lg  navbar-light " style="background-color: rgb(70, 150, 25);width: 100%;font-size: large;">
      <div class="container">
        <span class="navbar-brand mb-0 h1"><img style="height: 60px;width: 60px;" src="/static/ICON2.png"></span>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a class="nav-item nav-link" href="/" style="font-size: large;">Home</a>
          </div>
        </div>
      </div>
    </nav>
</div>


<form id="Form1" action="/farm-page/button" method="POST">
    <div class="container text-center"
         style="border-color: rgba(0, 0, 0, 0.918);border-style: inset;border-width: 9px;margin-top: 5vh;align-self: center;font-size: small;box-shadow: 0 0 50px black;background-color: black;">
        <div class="d-flex flex-row justify-content-around mt-5 ">
            <div class="d-flex flex-column justify-content-center  col col-3 cell" id="sec1">
                &nbsp;&nbsp;&nbsp;
                <p>SECTOR 1 </p>
                <p>Moisture : <label id="sec1m"></label></p>
                <p>Plant : <label id="sec1p"></label></p>
                <p>Motor : <label id="sec1mt"></label></p>

                <input class="align-self-center" type="radio" onclick="subForm()" value="1" name="coordinates">&nbsp;&nbsp;&nbsp;

            </div>
            <div class="d-flex flex-column  col col-3 cell" id="sec2">
                &nbsp;&nbsp;&nbsp;
                <p>SECTOR 2 </p>
                <p>Moisture : <label id="sec2m"></label></p>
                <p>Plant : <label id="sec2p"></label></p>
                <p>Motor : <label id="sec2mt"></label></p>

                <input class="align-self-center" type="radio" onclick="subForm()" value="2" name="coordinates">&nbsp;&nbsp;&nbsp;

            </div>
            <div class="d-flex flex-column  col col-3 cell" id="sec3">
                <p>SECTOR 3 </p>
                <p>Moisture : <label id="sec3m"></label></p>
                <p>Plant : <label id="sec3p"></label></p>
                <p>Motor : <label id="sec3mt"></label></p>

                <input  class="align-self-center" type="radio" onclick="subForm()" value="3" name="coordinates">

            </div>
        </div>
        <div class="d-flex flex-row  justify-content-around mt-5 ">
            <div class=" col col-3 cell" id="sec4">
                <p>SECTOR 4 </p>
                <p>Moisture : <label id="sec4m"></label></p>
                <p>Plant : <label id="sec4p"></label></p>
                <p>Motor : <label id="sec4mt"></label></p>

                <input class="align-self-center" type="radio" onclick="subForm()" value="4" name="coordinates">

            </div>
            <div class=" col col-3 cell" id="sec5">
                <p>SECTOR 5 </p>
                <p>Moisture : <label id="sec5m"></label></p>
                <p>Plant : <label id="sec5p"></label></p>
                <p>Motor : <label id="sec5mt"></label></p>

                <input class="align-self-center" type="radio" onclick="subForm()" value="5" name="coordinates">

            </div>
            <div class=" col col-3  cell" id="sec6">

                <p>SECTOR 6 </p>
                <p>Moisture : <label id="sec6m"></label></p>
                <p>Plant : <label id="sec6p"></label></p>
                <p>Motor : <label id="sec6mt"></label></p>

                <input class="align-self-center" type="radio" onclick="subForm()" value="6" name="coordinates">

            </div>
        </div>
        <div class="d-flex flex-row  justify-content-around my-5  ">
            <div class=" col col-3 cell" id="sec7">
                <p>SECTOR 7 </p>
                <p>Moisture : <label id="sec7m"></label></p>
                <p>Plant : <label id="sec7p"></label></p>
                <p>Motor : <label id="sec7mt"></label></p>

                <input class="align-self-center" type="radio" onclick="subForm()" value="7" name="coordinates">

            </div>
            <div class=" col col-3 cell" id="sec8">
                <p>SECTOR 8 </p>
                <p>Moisture : <label id="sec8m"></label></p>
                <p>Plant : <label id="sec8p"></label></p>
                <p>Motor : <label id="sec8mt"></label></p>

                <input class="align-self-center" type="radio" onclick="subForm()" value="8" name="coordinates">

            </div>
            <div class=" col col-3 cell" id="sec9">
                <p>SECTOR 9 </p>
                <p>Moisture : <label id="sec9m"></label></p>
                <p>Plant : <label id="sec9p"></label></p>
                <p>Motor : <label id="sec9mt"></label></p>

                <input class="align-self-center" type="radio" onclick="subForm()" value="9" name="coordinates">

            </div>
        </div>
    </div>

</form>

<script>
    function subForm() {
        document.getElementById("Form1").submit();
    }
</script>

</body>
</html>